

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Authentication &mdash; Connect API 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Roles" href="roles.html" />
    <link rel="prev" title="Rate limits and quotas" href="ratelimits.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
    
        <a href="index.html">
            <img src="_static/logo.svg" class="logo" alt="Logo"/>
        </a>
    

    
        <a href="index.html">Connect API</a>
    
    

    
    
    
    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="ratelimits.html">Rate limits and quotas</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#obtaining-and-using-an-access-token">Obtaining and using an access token</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-using-postman">Example using Postman</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-using-curl">Example using cURL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#refreshing-the-access-token-with-a-refresh-token">Refreshing the access token with a refresh token</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Example using cURL</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roles.html">Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">Conventions</a></li>
</ul>
<p class="caption"><span class="caption-text">Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="recipes/new-esim.html">Getting a new eSIM</a></li>
</ul>
<p class="caption"><span class="caption-text">Connectivity Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference/orders.html">Orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/products.html">Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/sims.html">SIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/subscriptions.html">Subscriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/notifications.html">Notifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Customer Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference/customer.html">Customer</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Connect API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Authentication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Truphone/connect-api-docs/blob/master/source/authentication.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="authentication">
<h1>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h1>
<p>The Truphone Connect API uses OAuth2 Client Credentials authentication type to authenticate request. You can get authentication tokens using the following url: <code class="docutils literal notranslate"><span class="pre">https://${ENVIRONMENT_HOST}/auth/realms/tru-staff/protocol/openid-connect/token</span></code>. Please be aware that these tokens have a limited duration so you need to include refresh logic in the client code, so that the token gets refreshed automatically without breaking the user experience.</p>
<div class="section" id="obtaining-and-using-an-access-token">
<h2>Obtaining and using an access token<a class="headerlink" href="#obtaining-and-using-an-access-token" title="Permalink to this headline">¶</a></h2>
<div class="section" id="example-using-postman">
<h3>Example using Postman<a class="headerlink" href="#example-using-postman" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create a new request</li>
<li>In the Authorization tab, set type to OAuth 2.0 and hit Get New Access Token</li>
<li>In the form, make sure you have these values:<ul>
<li>Grant Type: Client Credentials</li>
<li>Access Token URL: https://services.truphone.com/auth/realms/tru-staff/protocol/openid-connect/token</li>
<li>Client ID: clientID [^1]</li>
<li>Client secret: clientSecret [^1]</li>
</ul>
</li>
<li>Hit Request Token and then Use Token</li>
<li>Query the API away, the generated token should be valid for 5 minutes
[^1]: Given by Truphone</li>
</ul>
</div>
<div class="section" id="example-using-curl">
<h3>Example using cURL<a class="headerlink" href="#example-using-curl" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s --data <span class="se">\</span>
    <span class="s2">&quot;grant_type=client_credentials&amp;client_id=truphone&amp;client_secret=xxxxxx-xxxx-43f3-9fba-85686d72c1c0&quot;</span> <span class="se">\</span>
    https://services.truphone.com/auth/realms/tru-staff/protocol/openid-connect/token <span class="se">\</span>
    <span class="p">|</span> sed <span class="s1">&#39;s/.*access_token&quot;:&quot;\([^&quot;]*\).*/\1/&#39;</span><span class="sb">`</span>
    
$ <span class="nb">echo</span> <span class="nv">$ACCESS_TOKEN</span>        <span class="c1"># view the access token</span>

$ curl -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">&quot;</span> https://services.truphone.com/connect-api/...
</pre></div>
</div>
</div>
</div>
<div class="section" id="refreshing-the-access-token-with-a-refresh-token">
<h2>Refreshing the access token with a refresh token<a class="headerlink" href="#refreshing-the-access-token-with-a-refresh-token" title="Permalink to this headline">¶</a></h2>
<p>To refresh the access token, you can use the refresh token. The refresh token is obtained on the first call to obtain the access token (described previously). After that you can use it as shown on the following example:</p>
<div class="section" id="id1">
<h3>Example using cURL<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="sb">`</span>curl -s --data <span class="se">\</span>
    <span class="s2">&quot;grant_type=refresh_token&amp;refresh_token=&lt;your_refresh_token&gt;k&amp;client_id=truphone&amp;client_secret=xxxxxx-xxxx-43f3-9fba-85686d72c1c0&quot;</span> <span class="se">\</span>
    https://services-bit.truphone.com/auth/realms/tru-staff/protocol/openid-connect/token <span class="se">\</span>
    <span class="p">|</span> sed <span class="s1">&#39;s/.*access_token&quot;:&quot;\([^&quot;]*\).*/\1/&#39;</span><span class="sb">`</span>
    
$ <span class="nb">echo</span> <span class="nv">$ACCESS_TOKEN</span>        <span class="c1"># view the access token</span>
</pre></div>
</div>
<p>This call will give you an access token and a refresh token. The refresh token will be valid for 30 minutes.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="roles.html" class="btn btn-neutral float-right" title="Roles" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ratelimits.html" class="btn btn-neutral float-left" title="Rate limits and quotas" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Truphone

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>