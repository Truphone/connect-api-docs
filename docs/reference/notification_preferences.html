

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Notification Preferences Resource &mdash; Truphone Connect API 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Subscription Resource" href="subscription.html" />
    <link rel="prev" title="SIM Resource" href="sim.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Truphone Connect API
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployments.html">Deployment Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ratelimits.html">Rate limits and quotas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
</ul>
<p class="caption"><span class="caption-text">Storefront</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="order.html">Order Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="product.html">Product Resource</a></li>
</ul>
<p class="caption"><span class="caption-text">SIM Management</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sim.html">SIM Resource</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Notification Preferences Resource</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#webhook-notifications">Webhook notifications</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Customer Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="subscription.html">Subscription Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Truphone Connect API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Notification Preferences Resource</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/notification_preferences.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="notification-preferences-resource">
<h1>Notification Preferences Resource<a class="headerlink" href="#notification-preferences-resource" title="Permalink to this headline">¶</a></h1>
<p>The Connect API supports sending several types of notifications when significant events happen in the backend. In order to be able to receive notifications, the user must first set his notification preferences. Currently all of the notifications are associated with the SIM, and therefore, subscription is made via the <a class="reference internal" href="sim.html"><span class="doc">sim</span></a> resource.</p>
<p><strong>Properties</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">type</td>
<td align="center">the type of notification</td>
</tr>
<tr>
<td align="center">webhook_url</td>
<td align="center">The url to call if this notification is a webhook</td>
</tr>
</tbody>
</table><p><strong>Possible notification types</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Notification Type</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">SUBSCRIPTION_END</td>
<td align="center">A subscription has depleted or expired</td>
</tr>
<tr>
<td align="center">USAGE_THRESHOLD</td>
<td align="center">A subscription reached 80% usage</td>
</tr>
<tr>
<td align="center">AUTO_RENEWED</td>
<td align="center">A new subscription was purchased to renew a depleted one</td>
</tr>
</tbody>
</table><div class="section" id="webhook-notifications">
<h2>Webhook notifications<a class="headerlink" href="#webhook-notifications" title="Permalink to this headline">¶</a></h2>
<p>Currently the only type of notification supported, the webhook notification requires the developer to set up a public endpoint, to which the connect API will <code class="docutils literal notranslate"><span class="pre">POST</span></code> a notification.</p>
<p><strong>Shared notification payload</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">id</td>
<td align="center">Identifier</td>
</tr>
<tr>
<td align="center">type</td>
<td align="center">Notification type</td>
</tr>
</tbody>
</table><p><strong>Usage Threshold notification</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">iccid</td>
<td align="center">SIM Profile ICCID</td>
</tr>
<tr>
<td align="center">subscription_id</td>
<td align="center">subscription_id</td>
</tr>
<tr>
<td align="center">threshold</td>
<td align="center">Data capacity</td>
</tr>
</tbody>
</table><p><strong>Subscription End notification</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">iccid</td>
<td align="center">SIM Profile ICCID</td>
</tr>
<tr>
<td align="center">subscription_id</td>
<td align="center">subscription_id</td>
</tr>
</tbody>
</table><p><strong>Auto Renew notification</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">iccid</td>
<td align="center">SIM Profile ICCID</td>
</tr>
<tr>
<td align="center">subscription_id</td>
<td align="center">subscription_id</td>
</tr>
<tr>
<td align="center">new_subscription_id</td>
<td align="center">new_subscription_id</td>
</tr>
</tbody>
</table><p><strong>Example payloads</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1234-56789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SUBSCRIPTION_END&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iccid&quot;</span><span class="o">:</span> <span class="mi">893000000002391231</span><span class="p">,</span>
    <span class="s2">&quot;subscription_id&quot;</span><span class="o">:</span> <span class="s2">&quot;ZHNhc2Rhc2Q=&quot;</span>
<span class="p">}</span>

<span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1234-56789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;USAGE_THRESHOLD&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iccid&quot;</span><span class="o">:</span> <span class="mi">893000000002391231</span><span class="p">,</span>
    <span class="s2">&quot;subscription_id&quot;</span><span class="o">:</span> <span class="s2">&quot;ZHNhc2Rhc2Q=&quot;</span><span class="p">,</span>
    <span class="s2">&quot;threshold&quot;</span><span class="o">:</span> <span class="mi">80</span>
<span class="p">}</span>

<span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1234-56789&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;AUTO_RENEW&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iccid&quot;</span><span class="o">:</span> <span class="mi">893000000002391231</span><span class="p">,</span>
    <span class="s2">&quot;subscription_id&quot;</span><span class="o">:</span> <span class="s2">&quot;ZHNhc2Rhc2Q=&quot;</span>
    <span class="s2">&quot;auto_renew_subscription_id&quot;</span><span class="o">:</span> <span class="s2">&quot;ZHNhc2Rhc2kjhkhQ=&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="subscription.html" class="btn btn-neutral float-right" title="Subscription Resource" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sim.html" class="btn btn-neutral float-left" title="SIM Resource" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Truphone

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>