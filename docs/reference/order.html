

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Order Resource &mdash; Truphone Connect API 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Product Resource" href="product.html" />
    <link rel="prev" title="Conventions" href="../conventions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Truphone Connect API
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployments.html">Deployment Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
</ul>
<p class="caption"><span class="caption-text">Storefront</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Order Resource</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ordering-a-new-esim">Ordering a new eSIM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rules-and-validations">Rules and validations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-request">Example Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-response">Example Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#topping-up-an-existing-esim">Topping up an existing eSIM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Rules and validations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Example Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response">Response</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="product.html">Product Resource</a></li>
</ul>
<p class="caption"><span class="caption-text">SIM Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sim.html">SIM Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="notification_preferences.html">Notification Preferences Resource</a></li>
</ul>
<p class="caption"><span class="caption-text">Customer Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="subscription.html">Subscription Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Truphone Connect API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Order Resource</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/order.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="order-resource">
<h1>Order Resource<a class="headerlink" href="#order-resource" title="Permalink to this headline">¶</a></h1>
<p>A purchase order for data plans and eSIMs</p>
<p><strong>Properties</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">externalId</td>
<td align="center">The order identifier</td>
</tr>
<tr>
<td align="center">status</td>
<td align="center">The order status</td>
</tr>
<tr>
<td align="center">input</td>
<td align="center">Data required to process the order</td>
</tr>
<tr>
<td align="center">output</td>
<td align="center">Produced output after completed</td>
</tr>
<tr>
<td align="center">output.matchingId</td>
<td align="center">The eSIM activation code</td>
</tr>
<tr>
<td align="center">output.iccid</td>
<td align="center">The profile identifier</td>
</tr>
<tr>
<td align="center">output.smdpUrl</td>
<td align="center">The rsp URL</td>
</tr>
</tbody>
</table><p><strong>Possible values for <code class="docutils literal notranslate"><span class="pre">status</span></code></strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Property Name</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">COMPLETED</td>
<td align="center">Order complete</td>
</tr>
<tr>
<td align="center">FAILED</td>
<td align="center">Order Failed</td>
</tr>
<tr>
<td align="center">FULFILLING</td>
<td align="center">Order still processing</td>
</tr>
</tbody>
</table><div class="section" id="ordering-a-new-esim">
<h2>Ordering a new eSIM<a class="headerlink" href="#ordering-a-new-esim" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Allowed roles: <code class="docutils literal notranslate"><span class="pre">RESELLER</span></code>, <code class="docutils literal notranslate"><span class="pre">ACCOUNT_MANAGER</span></code></li>
<li>URL: <code class="docutils literal notranslate"><span class="pre">v1/order</span></code></li>
<li>METHOD: <code class="docutils literal notranslate"><span class="pre">POST</span></code></li>
</ul>
<div class="section" id="rules-and-validations">
<h3>Rules and validations<a class="headerlink" href="#rules-and-validations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If the customer does not exist it will be created</li>
<li><code class="docutils literal notranslate"><span class="pre">operationType</span></code> - Needs to be <code class="docutils literal notranslate"><span class="pre">NEW_ESIM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.product_id</span></code> (preferred) or <code class="docutils literal notranslate"><span class="pre">subscriptions.allowanceId</span></code> (deprecated) - Needs to be an id that belongs to the product catalog of the customer</li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.activationDate</span></code> - Can not be a date in the past</li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.price</span></code> - If is sent, it must be sent in pair with <code class="docutils literal notranslate"><span class="pre">subscriptions.currency</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.currency</span></code> - If is sent, it must be sent in pair with <code class="docutils literal notranslate"><span class="pre">subscriptions.price</span></code> and needs to be one of the currencies supported by the customer</li>
<li><code class="docutils literal notranslate"><span class="pre">device.type</span></code> - Must be one of the following values: <code class="docutils literal notranslate"><span class="pre">iot</span></code>, <code class="docutils literal notranslate"><span class="pre">ios</span></code> or <code class="docutils literal notranslate"><span class="pre">android</span></code></li>
</ul>
</div>
<div class="section" id="example-request">
<h3>Example Request<a class="headerlink" href="#example-request" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST <span class="se">\</span>
  https://services.truphone.com/esim/v1/order <span class="se">\</span>
  -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;X-Correlation-ID: unique-id-from-requester-123&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">      	&quot;input&quot;: {</span>
<span class="s1">            &quot;operationType&quot;: &quot;NEW_ESIM&quot;,</span>
<span class="s1">            &quot;countryCode&quot;: &quot;PT&quot;,</span>
<span class="s1">            &quot;customer&quot;: {</span>
<span class="s1">                &quot;email&quot;: &quot;john@doe.com&quot;,</span>
<span class="s1">                &quot;countryOfResidence&quot;: &quot;US&quot;</span>
<span class="s1">            },</span>
<span class="s1">            &quot;device&quot;: {</span>
<span class="s1">                &quot;id&quot;: &quot;123456789&quot;,</span>
<span class="s1">                &quot;model&quot;: &quot;iPhone&quot;,</span>
<span class="s1">                &quot;type&quot;: &quot;ios&quot;</span>
<span class="s1">            },</span>
<span class="s1">      	    &quot;subscriptions&quot;: [{</span>
<span class="s1">      	        &quot;product_id&quot;: &quot;a3u3z000000PZBhAAO&quot;,</span>
<span class="s1">      	        &quot;activationDate&quot;: &quot;2019-09-13T12:00:00Z&quot;,</span>
<span class="s1">      	        &quot;price&quot;: 10,</span>
<span class="s1">      	        &quot;currency&quot;: &quot;USD&quot;</span>
<span class="s1">      	    }]</span>
<span class="s1">      	}</span>
<span class="s1">      }&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="example-response">
<h3>Example Response<a class="headerlink" href="#example-response" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;externalId&quot;</span><span class="o">:</span> <span class="s2">&quot;3a6acf89-1ccf-4611-9424-453930f57ef1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;ACCEPTED&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The externalId identifies the order on truphone’s end and should be used to check the status and output of the order by the client. This will always be unique to each order.</p>
</div>
</div>
<div class="section" id="topping-up-an-existing-esim">
<h2>Topping up an existing eSIM<a class="headerlink" href="#topping-up-an-existing-esim" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Allowed roles: <code class="docutils literal notranslate"><span class="pre">RESELLER</span></code>, <code class="docutils literal notranslate"><span class="pre">ACCOUNT_MANAGER</span></code></li>
<li>URL: <code class="docutils literal notranslate"><span class="pre">v1/order</span></code></li>
<li>METHOD: <code class="docutils literal notranslate"><span class="pre">POST</span></code></li>
</ul>
<div class="section" id="id1">
<h3>Rules and validations<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The customer must already exist</li>
<li><code class="docutils literal notranslate"><span class="pre">operationType</span></code> - Needs to be <code class="docutils literal notranslate"><span class="pre">TOPUP</span></code> (preferred) or <code class="docutils literal notranslate"><span class="pre">TOPUP_ACTIVATION</span></code> (deprecated)</li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.product_id</span></code> (preferred) or <code class="docutils literal notranslate"><span class="pre">subscriptions.allowanceId</span></code> (deprecated) - Needs to be an id that belongs to the product catalog of the customer</li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.activationDate</span></code> - Can not be a date in the past</li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.price</span></code> - If is sent, it must be sent in pair with <code class="docutils literal notranslate"><span class="pre">subscriptions.currency</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">subscriptions.currency</span></code> - If is sent, it must be sent in pair with <code class="docutils literal notranslate"><span class="pre">subscriptions.price</span></code> and needs to be one of the currencies supported by the customer</li>
<li><code class="docutils literal notranslate"><span class="pre">device.type</span></code> - Must be one of the following values <code class="docutils literal notranslate"><span class="pre">ios</span></code> or <code class="docutils literal notranslate"><span class="pre">android</span></code></li>
</ul>
<p>In order to call this endpoint, both the <code class="docutils literal notranslate"><span class="pre">customer.email</span></code> and <code class="docutils literal notranslate"><span class="pre">esim.iccid</span></code> nodes are mandatory and must match each other, otherwise the topup won’t be performed:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">esim</span></code> and <code class="docutils literal notranslate"><span class="pre">esim.iccid</span></code> are mandatory</li>
<li><code class="docutils literal notranslate"><span class="pre">customer.email</span></code> - the email used to order the first eSIM;</li>
<li><code class="docutils literal notranslate"><span class="pre">esim.iccid</span></code> - the iccid obtained when the first eSIM was ordered.</li>
</ul>
</div>
<div class="section" id="id2">
<h3>Example Request<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST <span class="se">\</span>
  https://services.truphone.com/esim/v1/order <span class="se">\</span>
  -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Cache-Control: no-cache&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;X-Correlation-ID: unique-id-from-requester-123&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">      	&quot;input&quot;: {</span>
<span class="s1">            &quot;operationType&quot;: &quot;TOPUP_ACTIVATION&quot;,</span>
<span class="s1">            &quot;countryCode&quot;: &quot;PT&quot;,</span>
<span class="s1">            &quot;customer&quot;: {</span>
<span class="s1">                &quot;email&quot;: &quot;john@doe.com&quot;,</span>
<span class="s1">                &quot;countryOfResidence&quot;: &quot;US&quot;</span>
<span class="s1">            },</span>
<span class="s1">            &quot;device&quot;: {</span>
<span class="s1">                &quot;id&quot;: &quot;123456789&quot;,</span>
<span class="s1">                &quot;model&quot;: &quot;iPhone&quot;,</span>
<span class="s1">                &quot;type&quot;: &quot;ios&quot;</span>
<span class="s1">            },</span>
<span class="s1">            &quot;subscriptions&quot;: [{</span>
<span class="s1">      	        &quot;product_id&quot;: &quot;a3u3z000000PZBhAAO&quot;,</span>
<span class="s1">      	        &quot;activationDate&quot;: &quot;2019-09-13T12:00:00Z&quot;,</span>
<span class="s1">      	        &quot;price&quot;: 10,</span>
<span class="s1">      	        &quot;currency&quot;: &quot;USD&quot;</span>
<span class="s1">      	    }],</span>
<span class="s1">      	    &quot;esim&quot;: {</span>
<span class="s1">      	        &quot;iccid&quot;: &quot;123456789&quot;</span>
<span class="s1">      	    }</span>
<span class="s1">      	}</span>
<span class="s1">      }&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="response">
<h3>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;externalId&quot;</span><span class="o">:</span> <span class="s2">&quot;3a6acf89-1ccf-4611-9424-453930f57ef1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;ACCEPTED&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The externalId identifies the order on truphone’s end and should be used to check the status and output of the order by the client.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="product.html" class="btn btn-neutral float-right" title="Product Resource" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../conventions.html" class="btn btn-neutral float-left" title="Conventions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Truphone

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>